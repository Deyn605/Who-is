<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Qui est-ce ? üé≤</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 15px;
    }
    
    .container {
      background: white;
      max-width: 650px;
      width: 100%;
      padding: 30px 20px;
      border-radius: 25px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }
    
    h1 {
      text-align: center;
      color: #667eea;
      font-size: 2em;
      margin-bottom: 10px;
    }
    
    h2 {
      text-align: center;
      color: #333;
      margin-bottom: 25px;
      font-size: 1.3em;
    }
    
    .inputs-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-bottom: 25px;
    }
    
    input {
      padding: 14px;
      border: 2px solid #ddd;
      border-radius: 12px;
      font-size: 1em;
      transition: all 0.3s;
      width: 100%;
    }
    
    input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    button {
      width: 100%;
      padding: 15px;
      border: none;
      border-radius: 12px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s;
      margin-top: 10px;
    }
    
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .link-box {
      background: #f5f7fa;
      padding: 20px;
      border-radius: 12px;
      margin-top: 20px;
      border: 2px solid #e1e8ed;
    }
    
    .link-box p {
      margin-bottom: 10px;
      font-weight: bold;
      color: #333;
      text-align: center;
    }
    
    .link-text {
      color: #667eea;
      word-break: break-all;
      font-size: 0.85em;
      display: block;
      padding: 10px;
      background: white;
      border-radius: 8px;
      margin-bottom: 10px;
      text-align: center;
    }
    
    .copy-btn {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      padding: 12px;
      font-size: 1em;
      margin-top: 0;
    }
    
    .copy-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
    }
    
    .copy-btn.copied {
      background: linear-gradient(135deg, #20c997 0%, #17a2b8 100%);
    }
    
    #grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin: 25px 0;
    }
    
    .card {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      border: 3px solid #667eea;
      padding: 15px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: bold;
      color: #333;
      text-align: center;
      font-size: 0.9em;
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    }
    
    .card.removed {
      background: #e0e0e0;
      text-decoration: line-through;
      opacity: 0.4;
      border-color: #999;
      transform: scale(0.95);
    }
    
    #targetName {
      background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
      padding: 15px;
      border-radius: 12px;
      border: 3px solid #ffc107;
      color: #856404;
      font-weight: bold;
      font-size: 1em;
      margin-bottom: 20px;
      text-align: center;
    }
    
    #hearts {
      text-align: center;
      font-size: 2.5em;
      margin: 15px 0;
    }
    
    #result {
      text-align: center;
      font-size: 1.2em;
      font-weight: bold;
      margin-top: 20px;
      padding: 15px;
      border-radius: 12px;
    }
    
    .hidden {
      display: none;
    }
    
    .info-text {
      text-align: center;
      color: #666;
      margin-top: 15px;
      font-size: 0.9em;
    }
    
    /* Responsive pour tablettes */
    @media (min-width: 600px) {
      .container {
        padding: 40px;
      }
      
      h1 {
        font-size: 2.5em;
      }
      
      h2 {
        font-size: 1.5em;
      }
      
      .inputs-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      #grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 12px;
      }
      
      .card {
        font-size: 0.95em;
        padding: 18px;
      }
      
      .link-text {
        font-size: 0.9em;
      }
      
      #targetName {
        font-size: 1.1em;
        padding: 20px;
      }
      
      #result {
        font-size: 1.4em;
      }
    }
    
    /* Responsive pour grands √©crans */
    @media (min-width: 900px) {
      #grid {
        grid-template-columns: repeat(5, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üé≤ Qui est-ce ?</h1>
    
    <!-- PHASE 1 : Joueur 1 entre ses pr√©noms -->
    <div id="phase1">
      <h2>Joueur 1 : Entre 10 pr√©noms</h2>
      <div id="inputs1" class="inputs-grid"></div>
      <button id="btnValidate1">Valider et g√©n√©rer le lien</button>
      <div id="linkBox1"></div>
    </div>
    
    <!-- PHASE 2 : Joueur 2 entre ses pr√©noms -->
    <div id="phase2" class="hidden">
      <h2>Joueur 2 : Entre 10 pr√©noms</h2>
      <div id="inputs2" class="inputs-grid"></div>
      <button id="btnValidate2">G√©n√©rer les liens de jeu</button>
      <div id="linkBox2"></div>
    </div>
    
    <!-- PHASE 3 : Jeu -->
    <div id="phase3" class="hidden">
      <div id="targetName"></div>
      <div id="hearts">‚ù§Ô∏è‚ù§Ô∏è</div>
      <div id="grid"></div>
      <button id="btnGuess">Je devine le pr√©nom !</button>
      <div id="result"></div>
    </div>
  </div>

  <script>
    // URL de base du jeu sur GitHub Pages
    const BASE_URL = "https://Deyn605.github.io/Who-is/index.html";
    
    // Fonction pour copier un lien
    function copyToClipboard(text, buttonElement) {
      navigator.clipboard.writeText(text).then(() => {
        const originalText = buttonElement.textContent;
        buttonElement.textContent = '‚úÖ Copi√© !';
        buttonElement.classList.add('copied');
        
        setTimeout(() => {
          buttonElement.textContent = originalText;
          buttonElement.classList.remove('copied');
        }, 2000);
      }).catch(err => {
        alert('Erreur lors de la copie. Copie le lien manuellement.');
      });
    }
    
    // R√©cup√©rer les param√®tres de l'URL
    const urlParams = new URLSearchParams(window.location.search);
    
    // =============================================
    // PHASE 1 : JOUEUR 1
    // =============================================
    
    // Cr√©er les 10 inputs pour le Joueur 1
    const inputs1Container = document.getElementById('inputs1');
    for (let i = 1; i <= 10; i++) {
      const input = document.createElement('input');
      input.type = 'text';
      input.placeholder = `Pr√©nom ${i}`;
      input.maxLength = 20;
      inputs1Container.appendChild(input);
    }
    
    // Bouton de validation du Joueur 1
    document.getElementById('btnValidate1').addEventListener('click', () => {
      const inputs = inputs1Container.querySelectorAll('input');
      const names = Array.from(inputs)
        .map(input => input.value.trim())
        .filter(name => name.length > 0);
      
      if (names.length !== 10) {
        alert('‚ö†Ô∏è Entre exactement 10 pr√©noms !');
        return;
      }
      
      // Cr√©er l'URL pour le Joueur 2
      const linkForPlayer2 = `${BASE_URL}?p1=${encodeURIComponent(names.join(','))}`;
      
      document.getElementById('linkBox1').innerHTML = `
        <div class="link-box">
          <p>‚úÖ Parfait ! Envoie ce lien au Joueur 2 :</p>
          <div class="link-text">${linkForPlayer2}</div>
          <button class="copy-btn" onclick="copyToClipboard('${linkForPlayer2.replace(/'/g, "\\'")}', this)">üìã Copier le lien</button>
          <p class="info-text">Le Joueur 2 devra entrer ses 10 pr√©noms</p>
        </div>
      `;
    });
    
    // =============================================
    // PHASE 2 : JOUEUR 2
    // =============================================
    
    if (urlParams.has('p1') && !urlParams.has('p2')) {
      // Afficher la phase 2
      document.getElementById('phase1').classList.add('hidden');
      document.getElementById('phase2').classList.remove('hidden');
      
      // Cr√©er les 10 inputs pour le Joueur 2
      const inputs2Container = document.getElementById('inputs2');
      for (let i = 1; i <= 10; i++) {
        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = `Pr√©nom ${i}`;
        input.maxLength = 20;
        inputs2Container.appendChild(input);
      }
      
      // Bouton de validation du Joueur 2
      document.getElementById('btnValidate2').addEventListener('click', () => {
        const inputs = inputs2Container.querySelectorAll('input');
        const names2 = Array.from(inputs)
          .map(input => input.value.trim())
          .filter(name => name.length > 0);
        
        if (names2.length !== 10) {
          alert('‚ö†Ô∏è Entre exactement 10 pr√©noms !');
          return;
        }
        
        // R√©cup√©rer les pr√©noms du Joueur 1
        const names1 = urlParams.get('p1').split(',');
        const allNames = [...names1, ...names2];
        
        // Choisir 2 pr√©noms cibles al√©atoires diff√©rents
        const shuffled = [...allNames].sort(() => Math.random() - 0.5);
        const target1 = shuffled[0];
        const target2 = shuffled[1];
        
        // Cr√©er les URLs pour les deux joueurs
        const baseParams = `p1=${encodeURIComponent(names1.join(','))}&p2=${encodeURIComponent(names2.join(','))}&t1=${encodeURIComponent(target1)}&t2=${encodeURIComponent(target2)}`;
        
        const linkPlayer1 = `${BASE_URL}?${baseParams}&me=1`;
        const linkPlayer2 = `${BASE_URL}?${baseParams}&me=2`;
        
        document.getElementById('linkBox2').innerHTML = `
          <div class="link-box">
            <p>üéÆ Lien pour le Joueur 1 :</p>
            <div class="link-text">${linkPlayer1}</div>
            <button class="copy-btn" onclick="copyToClipboard('${linkPlayer1.replace(/'/g, "\\'")}', this)">üìã Copier lien Joueur 1</button>
          </div>
          <div class="link-box">
            <p>üéÆ Lien pour le Joueur 2 :</p>
            <div class="link-text">${linkPlayer2}</div>
            <button class="copy-btn" onclick="copyToClipboard('${linkPlayer2.replace(/'/g, "\\'")}', this)">üìã Copier lien Joueur 2</button>
          </div>
          <p class="info-text">Chaque joueur ouvre son lien pour commencer la partie !</p>
        `;
      });
    }
    
    // =============================================
    // PHASE 3 : JEU
    // =============================================
    
    if (urlParams.has('p1') && urlParams.has('p2') && urlParams.has('t1') && urlParams.has('t2') && urlParams.has('me')) {
      // Cacher les phases pr√©c√©dentes et afficher le jeu
      document.getElementById('phase1').classList.add('hidden');
      document.getElementById('phase2').classList.add('hidden');
      document.getElementById('phase3').classList.remove('hidden');
      
      // R√©cup√©rer toutes les donn√©es
      const names1 = urlParams.get('p1').split(',');
      const names2 = urlParams.get('p2').split(',');
      const allNames = [...names1, ...names2];
      const target1 = urlParams.get('t1');
      const target2 = urlParams.get('t2');
      const playerNumber = urlParams.get('me');
      
      let myTarget, opponentTarget, playerName;
      
      if (playerNumber === '1') {
        playerName = 'Joueur 1';
        myTarget = target1;
        opponentTarget = target2;
      } else if (playerNumber === '2') {
        playerName = 'Joueur 2';
        myTarget = target2;
        opponentTarget = target1;
      } else {
        alert('‚ùå Erreur : lien invalide !');
        throw new Error('Param√®tre me invalide');
      }
      
      // Afficher les instructions
      document.getElementById('targetName').textContent = 
        `Tu es ${playerName} - Ton pr√©nom √† faire deviner : ${myTarget}`;
      
      // Cr√©er la grille de cartes
      const grid = document.getElementById('grid');
      allNames.forEach(name => {
        const card = document.createElement('div');
        card.className = 'card';
        card.textContent = name;
        card.addEventListener('click', () => {
          card.classList.toggle('removed');
        });
        grid.appendChild(card);
      });
      
      // Gestion des vies
      let lives = 2;
      const heartsDiv = document.getElementById('hearts');
      const guessBtn = document.getElementById('btnGuess');
      const resultDiv = document.getElementById('result');
      
      guessBtn.addEventListener('click', () => {
        const guess = prompt('ü§î Quel pr√©nom devines-tu ?');
        
        if (!guess) return;
        
        const guessClean = guess.trim();
        
        if (guessClean === opponentTarget) {
          resultDiv.textContent = 'üéâ BRAVO ! Tu as trouv√© le bon pr√©nom !';
          resultDiv.style.background = 'linear-gradient(135deg, #d4edda, #c3e6cb)';
          resultDiv.style.color = '#155724';
          guessBtn.disabled = true;
          heartsDiv.textContent = '‚ù§Ô∏è‚ù§Ô∏è';
        } else {
          lives--;
          
          if (lives > 0) {
            heartsDiv.textContent = '‚ù§Ô∏è';
            alert('‚ùå Mauvaise r√©ponse ! Il te reste 1 vie.');
          } else {
            heartsDiv.textContent = 'üíî';
            resultDiv.textContent = `üò¢ Perdu ! C'√©tait : ${opponentTarget}`;
            resultDiv.style.background = 'linear-gradient(135deg, #f8d7da, #f5c6cb)';
            resultDiv.style.color = '#721c24';
            guessBtn.disabled = true;
          }
        }
      });
    }
  </script>
</body>
</html>
